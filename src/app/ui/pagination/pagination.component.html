<div class="relative overflow-hidden bg-white rounded-b-lg shadow-md">
  <nav
    class="flex flex-col items-center justify-between p-4 space-y-3 lg:flex-row lg:items-center lg:space-y-0 overflow-auto">
    <span class="text-sm font-normal text-gray-500">
      Pokazuje
      {{ pageSize() }}
      na stronÄ™
    </span>

    <div class="flex flex-col lg:flex-row items-center space-x-0 lg:space-x-4 space-y-4 lg:space-y-0">
      <nav>
        <ul class="flex items-center -space-x-px h-8 text-sm">
          <li>
            <button type="button" (click)="previousPageHandler()"
                    class="flex cursor-pointer items-center justify-center w-8 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700">
              <ng-icon name="heroChevronLeft"/>
            </button>
          </li>

          <ng-container [ngTemplateOutlet]="isShortPagination() ? paginationShortTpl : paginationLongTpl"/>

          <li>
            <button type="button" (click)="nextPageHandler()"
                    class="flex cursor-pointer items-center justify-center w-8 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700">
              <span class="sr-only">Next</span>
              <ng-icon name="heroChevronRight"/>
            </button>
          </li>
        </ul>
      </nav>
    </div>
  </nav>
</div>

<ng-template #paginationShortTpl>
  @for (page of totalPages() | appNTimes; track page; let i = $index) {
    <li>
      @if (currentPage() === i) {
        <span class="z-10 cursor-pointer flex items-center justify-center px-3 h-8 leading-tight text-blue-600 border border-blue-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700">
          {{ i + 1 }}
        </span>
      } @else {
        <button type="button" (click)="goToPageHandler(i + 1)" class="flex cursor-pointer items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">
          {{ i + 1 }}
        </button>
      }
    </li>
  }
</ng-template>

<ng-template #paginationLongTpl>
  @if (!(shownPages() | appInclude : 1)) {
    <li>
      <button type="button" (click)="goToPageHandler(1)"
              class="flex items-center cursor-pointer justify-center w-8 h-8 leading-tight border border-gray-300 hover:bg-gray-100 hover:text-gray-700"
      >{{ 1 }}
      </button>
    </li>

    @if (!(shownPages() | appInclude : 2)) {
      <li>
        <button class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">
          ...
        </button>
      </li>
    }
  }

  @for (page of shownPages(); track page) {
    <li>
      @if (currentPage() === page) {
        <span class="z-10 flex items-center cursor-pointer justify-center px-3 h-8 leading-tight text-blue-600 border border-blue-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700">
          {{ page }}
        </span>
      } @else {
        <button (click)="goToPageHandler(page)" type="button" class="flex cursor-pointer items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">
          {{ page }}
        </button>
      }
    </li>
  }

  @if (!(shownPages() | appInclude : totalPages())) {
    @if (!(shownPages() | appInclude : totalPages() - 1)) {
      <li>
        <button class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">
          ...
        </button>
      </li>
    }

    <li>
      @if (currentPage() === totalPages()) {
        <span class="z-10 flex items-center justify-center cursor-pointer px-3 h-8 leading-tight text-blue-600 border border-blue-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700">
          {{ totalPages() }}
        </span>
      } @else {
        <button type="button" (click)="goToPageHandler(totalPages())" class="flex cursor-pointer items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">
          {{ totalPages() }}
        </button>
      }
    </li>
  }
</ng-template>